{% extends "synopsis/base.html" %}
{% block title %}Upload References – {{ project.title }}{% endblock %}
{% block content %}
<h1 class="mb-3">Upload references – {{ project.title }}</h1>
<div class="mb-3">
    <a class="btn btn-outline-secondary" href="{% url 'synopsis:reference_batch_list' project.id %}">Back to reference imports</a>
</div>
<div class="card">
    <div class="card-body">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                {{ form.label.label_tag }}
        {{ form.label }}
        {{ form.label.errors }}
                <div class="form-text">Give this batch a short, descriptive name (e.g. “Scopus Jan 2025”).</div>
            </div>
            <div class="mb-3">
                {{ form.source_type.label_tag }}
        {{ form.source_type }}
        {{ form.source_type.errors }}
                <div class="form-text">Select the search type that produced this file.</div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    {{ form.search_date_start.label_tag }}
        {{ form.search_date_start }}
        {{ form.search_date_start.errors }}
                    <div class="form-text">Earliest date covered by this reference batch.</div>
                </div>
                <div class="col-md-6">
                    {{ form.search_date_end.label_tag }}
        {{ form.search_date_end }}
        {{ form.search_date_end.errors }}
                    <div class="form-text">Latest date covered by this reference batch.</div>
                </div>
            </div>
            <div class="mb-3">
                {{ form.ris_file.label_tag }}
        {{ form.ris_file }}
        {{ form.ris_file.errors }}
                <div class="form-text">
                    Upload a `.ris` file or plain text (`.txt`). Plain text should list each reference separated by a blank line, starting with the citation line followed by the abstract if available.
                </div>
            </div>
            <div class="mb-3">
                {{ form.notes.label_tag }}
        {{ form.notes }}
        {{ form.notes.errors }}
                <div class="form-text">Upload Notes (optional)</div>
            </div>
            <button class="btn btn-primary">Upload and import</button>
        </form>
    </div>
</div>
{% endblock %}
